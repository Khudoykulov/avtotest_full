{% extends 'base.html' %}

{% block title %}{{ category.name_uz }} - Ta'lim - Avtotest{% endblock %}

{% block content %}
<div class="card">
    <h1>{{ category.icon }} {{ category.name_uz }}</h1>
    <p>{{ category.description }}</p>
    
    <div class="mt-3">
        <a href="{% url 'education:index' %}" class="btn btn-secondary">‚¨Ö Orqaga</a>
        <a href="{% url 'quiz:take_category_test' category.id %}" class="btn btn-primary">Test topshirish</a>
    </div>
</div>

<div class="row">
    {% for content in contents %}
    <div class="col-md-6">
        <div class="card">
            {% if content.content_type == 'video' %}
                <div class="mb-2">
                    <span class="badge badge-primary">üé• Video</span>
                </div>
            {% elif content.content_type == 'text' %}
                <div class="mb-2">
                    <span class="badge badge-success">üìÑ Matn</span>
                </div>
            {% elif content.content_type == 'image' %}
                <div class="mb-2">
                    <span class="badge badge-info">üñºÔ∏è Rasm</span>
                </div>
            {% endif %}
            
            <h3>{{ content.title }}</h3>
            
            {% if content.content_type == 'text' and content.text_content %}
                <p>{{ content.text_content|truncatewords:30 }}</p>
            {% elif content.content_type == 'video' and content.video_url %}
                <p>Video material mavjud</p>
            {% elif content.content_type == 'image' and content.image %}
                {% load static %}
                <img src="{{ content.image.url }}" alt="{{ content.title }}" style="width: 100%; max-height: 200px; object-fit: cover; border-radius: 8px;">
            {% endif %}
            
            <div class="mt-3">
                <a href="{% url 'education:content' content.id %}" class="btn btn-primary">
                    Ko'rish
                </a>
            </div>
        </div>
    </div>
    {% empty %}
    <div class="col-md-12">
        <div class="card text-center">
            <h3>Bu bo'lim uchun hali materiallar tayyorlanmagan</h3>
            <p>Tez orada yangi materiallar qo'shiladi!</p>
            <a href="{% url 'quiz:take_category_test' category.id %}" class="btn btn-primary mt-2">
                Test topshirib ko'ring
            </a>
        </div>
    </div>
    {% endfor %}
</div>

<style>
.badge {
    display: inline-block;
    padding: 0.35em 0.65em;
    font-size: 0.75em;
    font-weight: 700;
    line-height: 1;
    text-align: center;
    white-space: nowrap;
    vertical-align: baseline;
    border-radius: 0.375rem;
}

.badge-primary {
    color: #fff;
    background-color: #0d6efd;
}

.badge-success {
    color: #fff;
    background-color: #198754;
}

.badge-info {
    color: #000;
    background-color: #0dcaf0;
}
</style>
{% endblock %}