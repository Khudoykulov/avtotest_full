<!DOCTYPE html>
<html>
<head>
    <title>Test Sahifa</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 2rem; }
        .test-section { background: #f8f9fa; padding: 1.5rem; margin: 1rem 0; border-radius: 8px; }
        .error { color: red; }
        .success { color: green; }
    </style>
</head>
<body>
    <h1>üß™ Test Sahifa</h1>
    
    <div class="test-section">
        <h2>üìÅ Category Icons</h2>
        {% for category in categories %}
            <div style="border: 1px solid #ddd; padding: 1rem; margin: 1rem 0;">
                <h3>{{ category.name_uz }}</h3>
                <p><strong>Icon fayl:</strong> {{ category.icon }}</p>
                <p><strong>Icon URL:</strong> {{ category.icon.url }}</p>
                <p><strong>Icon mavjudmi:</strong> {% if category.icon %}‚úÖ Ha{% else %}‚ùå Yo'q{% endif %}</p>
                
                {% if category.icon %}
                    <div>
                        <img src="{{ category.icon.url }}" alt="{{ category.name_uz }}" 
                             style="width: 60px; height: 60px; border-radius: 50%; object-fit: cover; border: 2px solid #ccc;"
                             onload="this.nextElementSibling.innerHTML='‚úÖ Rasm yuklandi'" 
                             onerror="this.nextElementSibling.innerHTML='‚ùå Rasm yuklanmadi: ' + this.src">
                        <p class="status"></p>
                    </div>
                {% endif %}
            </div>
        {% endfor %}
    </div>
    
    <div class="test-section">
        <h2>üé• Video Content</h2>
        {% load video_filters %}
        {% for video in videos %}
            <div style="border: 1px solid #ddd; padding: 1rem; margin: 1rem 0;">
                <h3>{{ video.title }}</h3>
                <p><strong>Category:</strong> {{ video.category.name_uz }}</p>
                <p><strong>Content Type:</strong> {{ video.content_type }}</p>
                <p><strong>Original URL:</strong> {{ video.video_url }}</p>
                <p><strong>Is YouTube:</strong> {% if video.video_url|is_youtube %}‚úÖ Ha{% else %}‚ùå Yo'q{% endif %}</p>
                <p><strong>Video ID:</strong> {{ video.video_url|youtube_video_id }}</p>
                <p><strong>Embed URL:</strong> {{ video.video_url|youtube_embed_url }}</p>
                
                <!-- Simple iframe test -->
                <div style="background: #000; width: 400px; height: 225px; position: relative; margin: 1rem 0;">
                    <iframe src="{{ video.video_url|youtube_embed_url }}" 
                            style="width: 100%; height: 100%; border: none;"
                            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
                            allowfullscreen
                            onload="console.log('iframe yuklandi')"
                            onerror="console.log('iframe xatolik')">
                    </iframe>
                </div>
                
                <a href="{{ video.video_url }}" target="_blank" style="background: red; color: white; padding: 0.5rem 1rem; text-decoration: none; border-radius: 4px;">
                    YouTube da ochish
                </a>
            </div>
        {% endfor %}
    </div>
</body>
</html>